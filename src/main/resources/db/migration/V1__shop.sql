drop table if exists customers;
drop table if exists customers_orders;
drop table if exists locations;
drop table if exists order_details;
drop table if exists orders;
drop table if exists product_categories;
drop table if exists products;
drop table if exists revenues;
drop table if exists stocks;
drop table if exists suppliers;

create table customers (id integer generated by default as identity, email varchar(255) not null, first_name varchar(255) not null, last_name varchar(255) not null, password varchar(255) not null, username varchar(255) not null, primary key (id));
create table customers_orders (customer_id integer not null, orders_id integer not null);
create table locations (id integer generated by default as identity, city varchar(255) not null, country varchar(255) not null, name varchar(255) not null, street varchar(255) not null, order_id integer, primary key (id));
create table order_details (id integer generated by default as identity, quantity integer not null, order_id integer, product_id integer, primary key (id));
create table orders (id integer generated by default as identity, created_at timestamp not null, customer_id integer, location_id integer, primary key (id));
create table product_categories (id integer generated by default as identity, description varchar(255) not null, name varchar(255) not null, primary key (id));
create table products (id integer not null, description varchar(255) not null, image_url varchar(255), name varchar(255) not null, price decimal(19,2) not null, weight double not null, category_id integer, supplier_id integer, primary key (id));
create table revenues (id integer generated by default as identity, date date not null, sum decimal(19,2) not null, location_id integer, primary key (id));
create table stocks (id integer generated by default as identity, quantity integer not null, location_id integer, product_id integer, primary key (id));
create table suppliers (id integer generated by default as identity, name varchar(255) not null, primary key (id));

alter table customers_orders add constraint UK_c23uaum5y9y2r1f0a3jprvu19 unique (orders_id);
alter table customers_orders add constraint FKcgubpw142krbvsbpfumpss2wl foreign key (orders_id) references orders;
alter table customers_orders add constraint FK23d13l73po2yhpnru16evw5o3 foreign key (customer_id) references customers;
alter table locations add constraint FKrpcs4hhnfw491yprsgbocs0wq foreign key (order_id) references orders;
alter table order_details add constraint FKjyu2qbqt8gnvno9oe9j2s2ldk foreign key (order_id) references orders;
alter table order_details add constraint FK4q98utpd73imf4yhttm3w0eax foreign key (product_id) references products;
alter table orders add constraint FKpxtb8awmi0dk6smoh2vp1litg foreign key (customer_id) references customers;
alter table orders add constraint FK8xumyehdyhksg6ijsi6ib9mar foreign key (location_id) references locations;
alter table products add constraint FK6t5dtw6tyo83ywljwohuc6g7k foreign key (category_id) references product_categories;
alter table products add constraint FK6i174ixi9087gcvvut45em7fd foreign key (supplier_id) references suppliers;
alter table revenues add constraint FKer2y52whnfjrycs7l8bqk7c67 foreign key (location_id) references locations;
alter table stocks add constraint FK2gb4265ojat2vxgjk2td79n0 foreign key (location_id) references locations;
alter table stocks add constraint FKff7be959jyco0iukc1dcjj9qm foreign key (product_id) references products;